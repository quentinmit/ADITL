head	1.1;
access;
symbols;
locks
	reidw:1.1; strict;
comment	@# @;


1.1
date	2005.03.20.07.14.22;	author reidw;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Initial revision
@
text
@package Utils;

require Exporter;
@@ISA = qw(Exporter);

@@EXPORT_OK = qw(email);

use strict;

use lib "./";
use Settings;
use Email::Send;
use Template;

sub email {
    my $to = shift;
    my $from = shift;
    my $subject = shift;
    my $body = shift;

    my $msg = "To: $to\nFrom: $from\nSubject: $subject\n\n$body";

    my $host = Settings::settings("SMTPHost");
    my $success = Email::Send::send SMTP => $msg, $host;
    unless($success) {
	print "failed to send email";
    }
}

sub message {
    my $msg = shift;

    my $template = Settings::settings("templateLib") . "\/message.html";
    my $html = Template::fillTemplate($template, [$msg]);
    return $html;
}

# returns html to do an immediate redirect.
sub redirect {
    my $page = shift;

    my $html = "<html><head><META http-equiv=\"refresh\" content=\"0;URL=$page\"></head></html>";
    return $html;
}
@
